<html>
	<head>
		<script src="jquery-2.1.3.js"></script>
		<meta charset="utf-8">
	</head>
	<body>
		<div id="vhodlist">
			<p>Входы</p>
			<button onclick="addVhod()">Добавить вход</button>
			<input id="vhod1" value = "qwe" />
		</div>
		<div id="soslist">
			<p>Состояния</p>
			<button onclick="addSos()">Добавить состояние</button>
			<input id="sos1" value = "123" />
		</div>
		<div id="vihodlist">
			<p>Выходы</p>
			<button onclick="addVihod()">Добавить выход</button>
			<input id="vihod1" value = "фыв" />
		</div>
		<br />
		<button onclick="generateValues()">ПОСЧИТАЙ ПОСЧИТАЙ ПОСЧИТАЙ ДО СТА</button>

		<table id="graphics" border=1>
			<tr id="head">
				<th>Входы\Состояния</th>
			</tr>
		</table>
		<table id="graphics2" border=1>
			<tr id="head2">
				<th>Выходы\Состояния</th>
			</tr>
		</table>
		<script>
			var sostoyaniya = new Array();
			var vihodi = new Array();
			function feminism(count, k, vhods) {
				if(k==-1){
					count[0]=vhods[0].length + 1;
					return count;
				}
				if(count[k] >= vhods[k].length){
					count[k] = 0;
					feminism(count, k-1, vhods);
				} else {
					count[k]++;
					if(count[k] >= vhods[k].length){
						count[k] = 0;
						feminism(count, k-1, vhods);
					}
					return count;
				}
			}
			function generateValues() {//TODO: сделать функцию, которая заменяет пробелы наподчеркивания при генерировании состтояний ну в принципе все.
				var yoba = 0;
				$($("#graphics").find("tr")[0]).find("td").remove();
				$("#graphics").find("tr:not(#head)").remove();
				$($("#graphics2").find("tr")[0]).find("td").remove();
				$("#graphics2").find("tr:not(#head2)").remove();
				sostoyaniya = new Array();
				vihodi = new Array();
				var vhodsInput = $("#vhodlist").find("input");
				var vihodsInput = $("#vihodlist").find("input");
				var sosInput = $("#soslist").find("input");
				
				var vhods = new Array();
				vhodsInput.each(function(i, item){
					if($(item).val()!=""){
						vhods.push($(item).val().replace(" ", "_"));
					}
				});


				var countvhod = new Array();
				for(var i = 0; i < vhods.length; i++){
					countvhod.push(0);
				}

				var vihods = new Array();
				vihodsInput.each(function(i, item){
					if($(item).val()!=""){
						vihods.push($(item).val().replace(" ", "_"));
					}
				});

				var countvihod = new Array();
				for(var i = 0; i < vihods.length; i++){
					countvihod.push(0);
				}

				var soses = new Array();
				sosInput.each(function(i, item){
					if($(item).val()!=""){
						soses.push($(item).val().replace(" ", "_"));
					}
				});

				var countsos = new Array();
				for(var i = 0; i < soses.length; i++){
					countsos.push(0);
				}

				while(countsos[0] <= soses[0].length) {
					var varInput="";
					for (var k = 0; k < countsos.length; k++)
					{
						varInput+=soses[k][countsos[k]];
					}
					feminism(countsos, countsos.length - 1, soses);
					sostoyaniya.push(varInput);
					$('#head').append("<td>"+ varInput +"</td>");
					$('#head2').append("<td>"+ varInput +"</td>");
					varInput = "";
					yoba++;
				}
				while(countvihod[0] <= vihods[0].length) {
					var varInput="";
					for (var k = 0; k < countvihod.length; k++)
					{
						varInput+=vihods[k][countvihod[k]];
					}
					feminism(countvihod, countvihod.length - 1, vihods);
					vihodi.push(varInput);
				}
				

				var countervhod = 0;
				while(countvhod[0] <= vhods[0].length) {
					var varInput="";
					for (var k = 0; k < countvhod.length; k++)
					{
						varInput+=vhods[k][countvhod[k]];
					}
					feminism(countvhod, countvhod.length - 1, vhods);
					$('#graphics').append("<tr id='trvhod"+countervhod+"'><td>"+ varInput +"</td></tr>");
					$('#graphics2').append("<tr id='tr2vhod"+countervhod+"'><td>"+ varInput +"</td></tr>");
					for (var i = sostoyaniya.length - 1; i >= 0; i--) {
						$('#trvhod'+countervhod).append("<td>"+ sostoyaniya[Math.floor(Math.random()*100) % sostoyaniya.length] +"</td>");
						$('#tr2vhod'+countervhod).append("<td>"+ vihodi[Math.floor(Math.random()*100) % vihodi.length] +"</td>");
					}
					varInput = "";
					//yoba++;
					countervhod++;
				}

			}
			function addVhod(){
				var counter = $("#vhodlist").find("input").length+1;
				$("#vhodlist").append("<input id=\"vhod"+counter+"\" />");
				$("#vhodlist").append("<button id=\"vhodbutton"+counter+"\" onclick=\"deleteVhod("+counter+")\">X</button>");

			}
			function deleteVhod(id){
				$("#vhod"+id).remove();
				$("#vhodbutton"+id).remove();
			}
			function addSos(){
				var counter = $("#soslist").find("input").length+1;
				$("#soslist").append("<input id=\"sos"+counter+"\" />");
				$("#soslist").append("<button id=\"sosbutton"+counter+"\" onclick=\"deleteSos("+counter+")\">X</button>");
			}
			function deleteSos(id){
				$("#sos"+id).remove();
				$("#sosbutton"+id).remove();
			}
			function addVihod(){
				var counter = $("#vihodlist").find("input").length+1;
				$("#vihodlist").append("<input id=\"vihod"+counter+"\" />");
				$("#vihodlist").append("<button id=\"vihodbutton"+counter+"\" onclick=\"deleteVihod("+counter+")\">X</button>");
			}
			function deleteVihod(id){
				$("#vihod"+id).remove();
				$("#vihodbutton"+id).remove();
			}
		</script>
	</body>
</html>
